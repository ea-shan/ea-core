(function(){"use strict";var mutable=["vertical","reverse","cycle","speed","playSpeed"];function Circlr(options){options.mouse=options.mouse||!0,options.scroll=options.scroll||!1,options.vertical=options.vertical||!1,options.reverse=options.reverse||!1,options.cycle=options.cycle||!0,options.start=options.start||0,options.speed=options.speed||50;var autoplay=options.autoplay||!1;options.playSpeed=options.playSpeed||100;var el=this.el=options.element;el.setAttribute("data-circlr",!0);var loader=options.loader?loader:void 0,length=this.length=el.getElementsByTagName("img").length,height=options.height||void 0,width=options.width||void 0,movable=!1,loaded=[],errored=[],current,pre={Y:null,X:null,frame:0},callbacks={};callbacks.ready=options.ready||void 0,callbacks.change=options.change||void 0;var scrollEvents=["wheel","mousewheel","scroll","DOMMouseScroll"];function onEventListener(target,event,fn){target.addEventListener?target.addEventListener(event,fn,!1):target.attachEvent("on"+event,(function(){fn.call(target,window.event)}))}let turn=this.turn=i=>{i=normalize(i),autoplay=!0,function turnInterval(){i!==current&&autoplay?(setFrame(normalize(i<current?current-1:current+1)),setTimeout(turnInterval,void 0===i?options.playSpeed:options.speed)):i===current&&(pre.frame=current=i,autoplay=!1,"function"==typeof callbacks.change&&callbacks.change(current,length))}()},gspbplaythreesixty=this.play=()=>{autoplay=!0,turn()};function preventDefault(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function preMove(e){autoplay=!1,preventDefault(e),e="touchstart"===e.type?e.changedTouches[0]:e,movable=!0,options.vertical?pre.Y=e.clientY-el.offsetTop:pre.X=e.clientX-el.offsetLeft}function normalize(cur){return cur<0?cur=options.cycle?cur+length:0:cur>length-1&&(cur=options.cycle?cur-length:length-1),cur}function isMove(e){if(movable){preventDefault(e),e="touchmove"===e.type?e.changedTouches[0]:e;var offset=options.vertical?e.clientY-el.offsetTop-pre.Y:e.clientX-el.offsetLeft-pre.X;offset=options.reverse?-offset:offset;var step=width/length,previous=current;(offset=Math.floor(offset/step))!==current&&previous!==(current=normalize(pre.frame+offset))&&(el.getElementsByTagName("img")[previous].style.display="none",el.getElementsByTagName("img")[current].style.display="block","function"==typeof callbacks.change&&callbacks.change(current,length))}}function stopMove(e){preventDefault(e),movable=!1,pre.frame=current}function scrollMove(e){autoplay=!1,preventDefault(e);var delta=e.deltaY||e.detail||-e.wheelDelta;delta/=Math.abs(delta),delta=options.reverse?-delta:delta,current=normalize(current+delta),el.getElementsByTagName("img")[pre.frame].style.display="none",el.getElementsByTagName("img")[current].style.display="block",pre.frame=current,"function"==typeof callbacks.change&&callbacks.change(current,length)}function initEvents(){loader&&(loader.style.display="none");var start=normalize(options.start);if(el.getElementsByTagName("img")[start].style.display="block",current=start,el.style.position="relative",el.style.width="100%","ontouchstart"in window||"onmsgesturechange"in window)(options.mouse||options.scroll)&&(onEventListener(el,"touchstart",preMove),onEventListener(el,"touchmove",isMove),onEventListener(el,"touchend",stopMove));else if(options.mouse&&(onEventListener(el,"mousedown",preMove),onEventListener(el,"mousemove",isMove),onEventListener(document,"mouseup",stopMove)),options.scroll)for(var e=0;e<scrollEvents.length;e++)if("on"+scrollEvents[e]in window){onEventListener(el,scrollEvents[e],scrollMove);break}autoplay&&gspbplaythreesixty(),"function"==typeof callbacks.ready&&callbacks.ready(errored)}function loadImages(){var img;loader&&(loader.style.display="block"),height=height||el.clientHeight,width=width||el.clientWidth;for(var i=0;i<length;i++)(img=el.getElementsByTagName("img")[i]).getAttribute("src")||img.setAttribute("src",img.getAttribute("data-src")),img.setAttribute("data-index",i),img.setAttribute("width",width),img.setAttribute("height",height),img.removeAttribute("data-src");initEvents()}function setFrame(i){el.getElementsByTagName("img")[current].style.display="none",el.getElementsByTagName("img")[i].style.display="block",pre.frame=current=i}loadImages(),this.go=function(i){i!==current&&(setFrame(i),"function"==typeof callbacks.change&&callbacks.change(current,length))},this.stop=function(){autoplay=!1},this.show=function(){el.style.display="block"},this.hide=function(){el.style.display="none"},this.set=function(set){for(var i=0,key;i<mutable.length;i++)options[key=mutable[i]]=void 0!==set[key]?set[key]:options[key]}}function Creator(element,options){if((element=document.getElementById(element)).getAttribute("data-circlr"))return;(options=options||{}).element=element;let images=JSON.parse(decodeURIComponent(element.dataset.images));return images&&0!=images.length?(images.forEach(item=>{let img=new Image;img.setAttribute("data-src",item.trim()),img.style.display="none",img.setAttribute("alt","360 Image"),element.insertBefore(img,element.firstChild.nextSibling)}),new Circlr(options)):void 0}"function"==typeof define&&define.amd?define([],(function(){return Creator})):"undefined"!=typeof module&&module.exports?module.exports=Creator:this.circlr=Creator}).call(this);var gsthreesixty=document.getElementsByClassName("gspb-threesixty-gallery_grid");for(let i=0;i<gsthreesixty.length;i++){let galleryNode=gsthreesixty[i],id=galleryNode.getAttribute("data-id"),options={scroll:!0,loader:galleryNode.querySelector(".gspb-threesixty-gallery_loader")},autoplay;galleryNode.getAttribute("data-autoplay")&&(options.autoplay=!0);let autoplaySpeed=galleryNode.getAttribute("data-autoplayspeed");autoplaySpeed&&(options.playSpeed=parseInt(autoplaySpeed));let playSpeed=galleryNode.getAttribute("data-playspeed");playSpeed&&(options.speed=parseInt(playSpeed));let crl=circlr(id,options),lightboxwrap=galleryNode.querySelector(".gspb-threesixty-lightbox");null!=lightboxwrap&&lightboxwrap.addEventListener("click",(function(e){const images=galleryNode.getElementsByTagName("img");let content="";for(let i=0;i<images.length;i++)"block"===images[i].style.display&&(content=images[i].getAttribute("src"));SimpleLightbox.open({items:[content]})}))}